======== STARTING UNIT TESTS ========

TESTING /api/about
URL: http://localhost:3000/api/about
Status Code: 200
Response: [{'first_name': 'Nicole', 'last_name': 'Davidov'}, {'first_name': 'Polina', 'last_name': 'Shchulepova'}]

TESTING /api/add (valid)
URL: http://localhost:3000/api/add
Payload: {'userid': 123123, 'description': 'testing bread', 'category': 'food', 'sum': 25, 'day': 8, 'month': 6, 'year': 2025}
Status Code: 201
Response: {'userid': 123123, 'description': 'testing bread', 'category': 'food', 'sum': 25, 'day': 8, 'month': 6, 'year': 2025, '_id': '6845efc39ff6aafbfb91f179', '__v': 0}

TESTING /api/add (missing fields)
URL: http://localhost:3000/api/add
Payload: {'userid': 123123, 'category': 'food'}
Status Code: 400
Response: {'error': 'Missing info'}

TESTING /api/add (invalid category)
Payload: {'userid': 123123, 'description': 'bad category', 'category': 'vacation', 'sum': 50, 'day': 8, 'month': 6, 'year': 2025}
Status Code: 500
Response: {'error': 'Server error', 'message': 'Cost validation failed: category: `vacation` is not a valid enum value for path `category`.'}

TESTING /api/add (invalid date)
Payload: {'userid': 123123, 'description': 'invalid date', 'category': 'food', 'sum': 10, 'day': 32, 'month': 13, 'year': 2025}
Status Code: 400
Response: {'error': 'Invalid date provided'}

TESTING /api/add (negative sum)
Payload: {'userid': 123123, 'description': 'negative sum', 'category': 'food', 'sum': -100, 'day': 8, 'month': 6, 'year': 2025}
Status Code: 500
Response: {'error': 'Server error', 'message': 'Cost validation failed: sum: Path `sum` (-100) is less than minimum allowed value (0).'}

TESTING /api/report
URL: http://localhost:3000/api/report?id=123123&year=2025&month=6
Status Code: 200
Response: {'userid': 123123, 'year': 2025, 'month': 6, 'costs': [{'food': [{'sum': 10, 'description': 'milk', 'day': 3}, {'sum': 100, 'description': 'milk', 'day': 8}, {'sum': 8, 'description': 'milk 9', 'day': 8}, {'sum': 25, 'description': 'testing bread', 'day': 8}, {'sum': 25, 'description': 'testing bread', 'day': 8}, {'sum': 25, 'description': 'testing bread', 'day': 8}, {'sum': 25, 'description': 'testing bread', 'day': 8}, {'sum': 25, 'description': 'testing bread', 'day': 8}, {'sum': 25, 'description': 'testing bread', 'day': 8}]}, {'health': []}, {'housing': []}, {'sport': []}, {'education': []}]}

TESTING /api/report (missing params)
URL: http://localhost:3000/api/report
Status Code: 400
Response: {'error': 'Missing required query parameters: id, year, or month'}

TESTING /api/report (non-existing user)
URL: http://localhost:3000/api/report?id=999999&year=2025&month=6
Status Code: 404
Response: {'error': 'User not found.'}

TESTING /api/report (missing month)
URL: http://localhost:3000/api/report?id=123123&year=2025
Status Code: 400
Response: {'error': 'Missing required query parameters: id, year, or month'}

TESTING /api/report (invalid type for month)
URL: http://localhost:3000/api/report?id=123123&year=2025&month=June
Status Code: 400
Response: {'error': 'Query parameters id, year, and month must be valid numbers'}

TESTING /api/users/123123
URL: http://localhost:3000/api/users/123123
Status Code: 200
Response: {'id': 123123, 'first_name': 'mosh', 'last_name': 'israeli', 'total': 368}

TESTING /api/users/999999 (non-existing user)
URL: http://localhost:3000/api/users/999999
Status Code: 404
Response: {'error': 'User not found'}

======== END OF TESTS ========
